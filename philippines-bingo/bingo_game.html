<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í•„ë¦¬í•€ ë¬¸í™” ë¹™ê³  ê²Œì„ ğŸ‡µğŸ‡­</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'ë§‘ì€ ê³ ë”•', 'Malgun Gothic', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(45deg, #FF6B6B, #4ECDC4);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .controls {
            padding: 20px;
            background: #f8f9fa;
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }

        .btn-primary {
            background: #007bff;
            color: white;
        }

        .btn-primary:hover {
            background: #0056b3;
            transform: translateY(-2px);
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-success:hover {
            background: #1e7e34;
            transform: translateY(-2px);
        }

        .btn-warning {
            background: #ffc107;
            color: #212529;
        }

        .btn-warning:hover {
            background: #e0a800;
            transform: translateY(-2px);
        }

        .btn:disabled {
            background: #6c757d;
            cursor: not-allowed;
            transform: none;
        }

        .game-area {
            display: flex;
            padding: 20px;
            gap: 20px;
        }

        .bingo-card {
            flex: 2;
        }

        .card-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 3px;
            background: #dee2e6;
            padding: 3px;
            border-radius: 10px;
        }

        .card-cell {
            aspect-ratio: 1;
            background: white;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 12px;
            text-align: center;
            padding: 5px;
        }

        .card-cell:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .card-cell.marked {
            background: #28a745 !important;
            color: white;
            border-color: #28a745;
        }

        .card-cell.free {
            background: #ffc107;
            color: #212529;
            font-weight: bold;
            cursor: default;
        }

        .category {
            font-size: 10px;
            font-weight: bold;
            margin-bottom: 2px;
        }

        .element {
            font-size: 11px;
        }

        /* ì¹´í…Œê³ ë¦¬ë³„ ìƒ‰ìƒ */
        .category-food { background-color: #FFE4B5; }
        .category-festival { background-color: #FFB6C1; }
        .category-tourism { background-color: #87CEEB; }
        .category-clothing { background-color: #DDA0DD; }
        .category-music { background-color: #98FB98; }
        .category-language { background-color: #F0E68C; }

        .called-section {
            flex: 1;
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
        }

        .called-section h3 {
            margin-bottom: 15px;
            color: #495057;
        }

        .called-list {
            max-height: 400px;
            overflow-y: auto;
            background: white;
            border-radius: 8px;
            padding: 10px;
        }

        .called-item {
            padding: 8px;
            margin-bottom: 5px;
            background: #e9ecef;
            border-radius: 5px;
            font-size: 14px;
        }

        .status {
            text-align: center;
            padding: 15px;
            background: #e9ecef;
            margin: 20px;
            border-radius: 10px;
            font-size: 18px;
            font-weight: bold;
        }

        .stats {
            display: flex;
            justify-content: space-around;
            padding: 15px;
            background: #f8f9fa;
            margin: 20px;
            border-radius: 10px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #007bff;
        }

        .stat-label {
            font-size: 14px;
            color: #6c757d;
        }

        .auto-call-status {
            padding: 10px;
            margin: 10px 20px;
            border-radius: 8px;
            text-align: center;
            font-weight: bold;
        }

        .auto-call-active {
            background: #d4edda;
            color: #155724;
        }

        .auto-call-inactive {
            background: #f8d7da;
            color: #721c24;
        }

        @media (max-width: 768px) {
            .game-area {
                flex-direction: column;
            }
            
            .header h1 {
                font-size: 1.8em;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ‡µğŸ‡­ í•„ë¦¬í•€ ë¬¸í™” ë¹™ê³  ê²Œì„ ğŸ‰</h1>
            <p>í•„ë¦¬í•€ì˜ í’ë¶€í•œ ë¬¸í™”ë¥¼ ë°°ìš°ë©° ì¦ê¸°ëŠ” ë¹™ê³  ê²Œì„</p>
        </div>

        <div class="controls">
            <button class="btn btn-primary" id="newGameBtn" onclick="newGame()">ìƒˆ ê²Œì„ ì‹œì‘</button>
            <button class="btn btn-success" id="callBingoBtn" onclick="callBingo()" disabled>ë¹™ê³ ! ğŸŠ</button>
            <button class="btn btn-warning" id="autoCallBtn" onclick="toggleAutoCall()" disabled>ìë™ í˜¸ì¶œ ì‹œì‘</button>
        </div>

        <div id="autoCallStatus" class="auto-call-status auto-call-inactive">
            ìë™ í˜¸ì¶œ: ë¹„í™œì„±í™”ë¨
        </div>

        <div class="status" id="gameStatus">ìƒˆ ê²Œì„ì„ ì‹œì‘í•˜ì‹­ì‹œì˜¤</div>

        <div class="stats">
            <div class="stat-item">
                <div class="stat-value" id="markedCells">0</div>
                <div class="stat-label">ë§ˆí‚¹ëœ ì…€</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="bingoCount">0</div>
                <div class="stat-label">ë¹™ê³  ìˆ˜</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="gameProgress">0%</div>
                <div class="stat-label">ê²Œì„ ì§„í–‰ë¥ </div>
            </div>
        </div>

        <div class="game-area">
            <div class="bingo-card">
                <div class="card-grid" id="bingoCard"></div>
            </div>
            <div class="called-section">
                <h3>í˜¸ì¶œëœ í•„ë¦¬í•€ ë¬¸í™” ìš”ì†Œ</h3>
                <div class="called-list" id="calledList"></div>
            </div>
        </div>
    </div>

    <script>
        // í•„ë¦¬í•€ ë¬¸í™” ìš”ì†Œ ë°ì´í„°
        const filipinoElements = {
            'ìŒì‹': [
                'ë ˆì¹¸ë„', 'ì•„ë„ë³´', 'ì‹œë‹ˆê°„', 'íŒ”ë¼ë¸Œ', 'íƒ„ì‹œì•„',
                'í• ë¡œ-í• ë¡œ', 'ë ˆì²´ í”Œë€', 'ë°”ë‚˜ë‚˜ ì¼€ì¹˜ì—…', 'ë””ë¶ˆ-ë””ë¶ˆ', 'í”¼ì‹œë³¼'
            ],
            'ì¶•ì œ': [
                'ì‚¬í•€ì•¼í•œ', 'ì•„í‹°-ì•„í‹°', 'í”¼ìŠ¤í‹°ë°”', 'ë§ˆê¸´ë¼ì•¼', 'ì¹´ë‹ˆë°œ',
                'íŒŒí• ë¡œê·¸', 'ì‹ ì½” í˜ìŠ¤í‹°ë²Œ', 'í”¼ë…¸ì´ ë¹™ê³ ', 'ë””ë°”í•˜ì›ƒ', 'í• ë¼ì™€'
            ],
            'ê´€ê´‘ì§€': [
                'ë°”ë¼ì¹´ì´', 'ë³´ë¼ì¹´ì´', 'íŒ”ë¼ì™„', 'ì„¸ë¶€', 'ë³´í™€',
                'ë§ˆë‹ë¼ ë§Œ', 'íƒ€ì§€ë§ˆí•˜ì¹´ë¥´', 'ë°”ë‚˜ìš°ì–´ ì„¬', 'í† ë„¤ì´ë„ ì•Œë¦¬', 'ì‚°í†  ë„ë°ê³ '
            ],
            'ì „í†µ ì˜ìƒ': [
                'ë°”ë¼ì˜¤íŠ¸ ì‚¬ì•¼', 'íƒ€ë°€ë¡œí¬', 'ì£¼ìŠ¤í‹°', 'ë°”ë¥´ì˜¤íŠ¸', 'ì‚´ë£¨ì˜¤íƒ€',
                'ë§ˆë„ì‚´ë¼', 'íŒŒë‹ë¦¬', 'ëª¬í† ì†Œ', 'í…Œë¥¼ë ˆì‚¬', 'ì‚¼ë¹—'
            ],
            'ì „í†µ ì•…ê¸°': [
                'ì¿¤íˆ¬ë‹', 'ì•„ê¸°-ì•„ê°„', 'ë¹ ëˆ„ì´', 'íƒë³´ë¼', 'ì˜ë§ì˜ë§',
                'ë¶€ë¶€ì´', 'ë‹¬ë§ê°€ë§', 'í´ë¼ë§', 'ê°íŒ', 'ì•„í”¼ì‹œ'
            ],
            'ì–¸ì–´': [
                'ì‚¬ë³´ìŒ', 'ì¹´ë¼ë§›ì‚¬', 'ë§ˆí• ë¡œ', 'ì‚ë„', 'ë§ˆë¬´ë´‡',
                'ì‚¬ë¼í•‘', 'ë‚˜ë‚˜ë§ˆìŠ¤í…Œ', 'í…ì½”ìŠ¤', 'ìšœë¡œ', 'ë””ë„¤'
            ]
        };

        // ê²Œì„ ìƒíƒœ
        let gameState = {
            card: [],
            marked: [],
            bingoCount: 0,
            gameActive: false,
            calledElements: [],
            autoCallActive: false
        };

        // ì¹´í…Œê³ ë¦¬ ìƒ‰ìƒ
        const categoryColors = {
            'ìŒì‹': 'category-food',
            'ì¶•ì œ': 'category-festival',
            'ê´€ê´‘ì§€': 'category-tourism',
            'ì „í†µ ì˜ìƒ': 'category-clothing',
            'ì „í†µ ì•…ê¸°': 'category-music',
            'ì–¸ì–´': 'category-language'
        };

        // ìƒˆ ê²Œì„ ì‹œì‘
        function newGame() {
            gameState.gameActive = true;
            gameState.bingoCount = 0;
            gameState.calledElements = [];
            gameState.marked = Array(5).fill().map(() => Array(5).fill(false));
            
            generateNewCard();
            updateDisplay();
            
            document.getElementById('newGameBtn').disabled = true;
            document.getElementById('callBingoBtn').disabled = false;
            document.getElementById('autoCallBtn').disabled = false;
            document.getElementById('gameStatus').textContent = 'ê²Œì„ ì§„í–‰ ì¤‘... í•„ë¦¬í•€ ë¬¸í™” ìš”ì†Œë¥¼ ì°¾ìœ¼ì‹­ì‹œì˜¤!';
            
            document.getElementById('calledList').innerHTML = '';
        }

        // ìƒˆë¡œìš´ ë¹™ê³  ì¹´ë“œ ìƒì„±
        function generateNewCard() {
            gameState.card = Array(5).fill().map(() => Array(5).fill(''));
            
            // ëª¨ë“  ìš”ì†Œë¥¼ í•˜ë‚˜ì˜ ë¦¬ìŠ¤íŠ¸ë¡œ í•©ì¹˜ê³  ì„ê¸°
            const allElements = [];
            Object.entries(filipinoElements).forEach(([category, elements]) => {
                elements.forEach(element => {
                    allElements.push({category, element});
                });
            });
            
            // ì¤‘ë³µ ì œê±° í›„ ì„ê¸°
            const uniqueElements = [...new Map(allElements.map(item => [item.element, item])).values()];
            shuffleArray(uniqueElements);
            
            // ì¹´ë“œ ì±„ìš°ê¸°
            let elementIndex = 0;
            for (let i = 0; i < 5; i++) {
                for (let j = 0; j < 5; j++) {
                    if (i === 2 && j === 2) {
                        // ì¤‘ì‹¬ì€ FREE
                        gameState.card[i][j] = {category: 'FREE', element: 'FREE ğŸ‰'};
                    } else if (elementIndex < uniqueElements.length) {
                        gameState.card[i][j] = uniqueElements[elementIndex];
                        elementIndex++;
                    }
                }
            }
        }

        // ë°°ì—´ ì„ê¸°
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        // ì¹´ë”” ë””ìŠ¤í”Œë ˆì´ ì—…ë°ì´íŠ¸
        function updateDisplay() {
            const cardGrid = document.getElementById('bingoCard');
            cardGrid.innerHTML = '';
            
            for (let i = 0; i < 5; i++) {
                for (let j = 0; j < 5; j++) {
                    const cell = document.createElement('div');
                    cell.className = 'card-cell';
                    cell.dataset.row = i;
                    cell.dataset.col = j;
                    
                    const cellData = gameState.card[i][j];
                    
                    if (cellData.category === 'FREE') {
                        cell.className += ' free';
                        cell.innerHTML = `<div class="element">FREE ğŸ‰</div>`;
                    } else {
                        if (gameState.marked[i][j]) {
                            cell.className += ' marked';
                        } else {
                            cell.className += ` ${categoryColors[cellData.category]}`;
                        }
                        cell.innerHTML = `
                            <div class="category">${cellData.category}</div>
                            <div class="element">${cellData.element}</div>
                        `;
                        
                        cell.onclick = () => markCell(i, j);
                    }
                    
                    cardGrid.appendChild(cell);
                }
            }
            
            updateStats();
            checkBingo();
        }

        // ì…€ ë§ˆí‚¹
        function markCell(row, col) {
            if (!gameState.gameActive || (row === 2 && col === 2)) return;
            
            gameState.marked[row][col] = !gameState.marked[row][col];
            updateDisplay();
        }

        // ìë™ í˜¸ì¶œ í† ê¸€
        function toggleAutoCall() {
            gameState.autoCallActive = !gameState.autoCallActive;
            
            const autoCallBtn = document.getElementById('autoCallBtn');
            const autoCallStatus = document.getElementById('autoCallStatus');
            
            if (gameState.autoCallActive) {
                autoCallBtn.textContent = 'ìë™ í˜¸ì¶œ ì¤‘ì§€';
                autoCallStatus.className = 'auto-call-status auto-call-active';
                autoCallStatus.textContent = 'ìë™ í˜¸ì¶œ í™œì„±í™”ë¨...';
                autoCallElement();
            } else {
                autoCallBtn.textContent = 'ìë™ í˜¸ì¶œ ì‹œì‘';
                autoCallStatus.className = 'auto-call-status auto-call-inactive';
                autoCallStatus.textContent = 'ìë™ í˜¸ì¶œ ë¹„í™œì„±í™”ë¨';
            }
        }

        // ìë™ í˜¸ì¶œ ìš”ì†Œ
        function autoCallElement() {
            if (!gameState.autoCallActive || !gameState.gameActive) return;
            
            const categories = Object.keys(filipinoElements);
            const randomCategory = categories[Math.floor(Math.random() * categories.length)];
            const elements = filipinoElements[randomCategory];
            const randomElement = elements[Math.floor(Math.random() * elements.length)];
            
            // ì´ë¯¸ í˜¸ì¶œëœ ê²ƒì¸ì§€ í™•ì¸
            const alreadyCalled = gameState.calledElements.some(item => 
                item.category === randomCategory && item.element === randomElement
            );
            
            if (!alreadyCalled) {
                gameState.calledElements.push({category: randomCategory, element: randomElement});
                updateCalledList();
                
                // ìë™ ë§ˆí‚¹
                for (let i = 0; i < 5; i++) {
                    for (let j = 0; j < 5; j++) {
                        if (gameState.card[i][j].element === randomElement) {
                            gameState.marked[i][j] = true;
                            break;
                        }
                    }
                }
                
                updateDisplay();
            }
            
            // 3ì´ˆ í›„ ë‹¤ìŒ í˜¸ì¶œ
            setTimeout(autoCallElement, 3000);
        }

        // í˜¸ì¶œëœ ë¦¬ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
        function updateCalledList() {
            const calledList = document.getElementById('calledList');
            calledList.innerHTML = '';
            
            gameState.calledElements.forEach((item, index) => {
                const div = document.createElement('div');
                div.className = 'called-item';
                div.textContent = `${item.category}: ${item.element}`;
                calledList.appendChild(div);
            });
            
            // ìŠ¤í¬ë¡¤ì„ ë§¨ ì•„ë˜ë¡œ
            calledList.scrollTop = calledList.scrollHeight;
        }

        // ë¹™ê³  í™•ì¸
        function checkBingo() {
            gameState.bingoCount = 0;
            
            // ê°€ë¡œ ë¹™ê³  í™•ì¸
            for (let i = 0; i < 5; i++) {
                if (checkRow(i)) {
                    gameState.bingoCount++;
                }
            }
            
            // ì„¸ë¡œ ë¹™ê³  í™•ì¸
            for (let j = 0; j < 5; j++) {
                if (checkColumn(j)) {
                    gameState.bingoCount++;
                }
            }
            
            // ëŒ€ê°ì„  ë¹™ê³  í™•ì¸
            if (checkDiagonal(true)) gameState.bingoCount++;
            if (checkDiagonal(false)) gameState.bingoCount++;
        }

        // í–‰ ë¹™ê³  í™•ì¸
        function checkRow(row) {
            for (let j = 0; j < 5; j++) {
                if (!gameState.marked[row][j] && !(row === 2 && j === 2)) {
                    return false;
                }
            }
            return true;
        }

        // ì—´ ë¹™ê³  í™•ì¸
        function checkColumn(col) {
            for (let i = 0; i < 5; i++) {
                if (!gameState.marked[i][col] && !(i === 2 && col === 2)) {
                    return false;
                }
            }
            return true;
        }

        // ëŒ€ê°ì„  ë¹™ê³  í™•ì¸
        function checkDiagonal(main) {
            for (let i = 0; i < 5; i++) {
                const j = main ? i : 4 - i;
                if (!gameState.marked[i][j] && !(i === 2 && j === 2)) {
                    return false;
                }
            }
            return true;
        }

        // í†µê³„ ì—…ë°ì´íŠ¸
        function updateStats() {
            const totalCells = 24; // FREE ì…€ ì œì™¸
            const markedCells = gameState.marked.flat().filter(Boolean).length;
            const percentage = (markedCells / totalCells * 100).toFixed(1);
            
            document.getElementById('markedCells').textContent = `${markedCells}/24`;
            document.getElementById('bingoCount').textContent = gameState.bingoCount;
            document.getElementById('gameProgress').textContent = `${percentage}%`;
        }

        // ë¹™ê³  í˜¸ì¶œ
        function callBingo() {
            if (gameState.bingoCount >= 1) {
                alert(`ì¶•í•˜í•©ë‹ˆë‹¤! ë¹™ê³ ë¥¼ ì™„ì„±í–ˆìŠµë‹ˆë‹¤! ğŸ‰\në¹™ê³  ê°œìˆ˜: ${gameState.bingoCount}`);
            } else {
                alert('ì•„ì§ ë¹™ê³  ì¡°ê±´ì„ ì¶©ì¡±í•˜ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ê³„ì† ì§„í–‰í•˜ì‹­ì‹œì˜¤!');
            }
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        window.onload = function() {
            updateDisplay();
        };
    </script>
</body>
</html>