DEPRECATED: The legacy builder is deprecated and will be removed in a future release.
            Install the buildx component to build images with BuildKit:
            https://docs.docker.com/go/buildx/

Sending build context to Docker daemon  498.2kB
Step 1/22 : FROM node:18-alpine AS builder
 ---> ee77c6cd7c18
Step 2/22 : WORKDIR /app
 ---> Using cache
 ---> 2a7a8061ed51
Step 3/22 : COPY package*.json ./
 ---> Using cache
 ---> a210b443546e
Step 4/22 : RUN npm ci --legacy-peer-deps
 ---> Using cache
 ---> 9628caade070
Step 5/22 : COPY prisma ./prisma
 ---> Using cache
 ---> 59eb713b39f0
Step 6/22 : RUN npx prisma generate
 ---> Using cache
 ---> 6189c459a0be
Step 7/22 : COPY . .
 ---> 545784bb8b13
Step 8/22 : RUN npm run build
 ---> Running in 9b10fa6e061b

> nabijiyo@1.0.0 build
> next build

Attention: Next.js now collects completely anonymous telemetry regarding usage.
This information is used to shape Next.js' roadmap and prioritize features.
You can learn more, including how to opt-out if you'd not like to participate in this anonymous program, by visiting the following URL:
https://nextjs.org/telemetry

  â–² Next.js 14.2.35

   Creating an optimized production build ...
 âœ“ Compiled successfully
   Skipping linting
   Checking validity of types ...
   Collecting page data ...
[91mprisma:warn Prisma failed to detect the libssl/openssl version to use, and may not work as expected. Defaulting to "openssl-1.1.x".
Please manually install OpenSSL and try installing Prisma again.
[0m[91mPrismaClientInitializationError: Unable to require(`/app/node_modules/.prisma/client/libquery_engine-linux-musl.so.node`).
The Prisma engines do not seem to be compatible with your system. Please refer to the documentation about Prisma's system requirements: https://pris.ly/d/system-requirements

Details: Error loading shared library libssl.so.1.1: No such file or directory (needed by /app/node_modules/.prisma/client/libquery_engine-linux-musl.so.node)
    at Object.loadLibrary (/app/node_modules/@prisma/client/runtime/library.js:111:10243)
    at async _r.loadEngine (/app/node_modules/@prisma/client/runtime/library.js:112:448)
    at async _r.instantiateLibrary (/app/node_modules/@prisma/client/runtime/library.js:111:12599) {
  clientVersion: '5.22.0',
  errorCode: undefined
}
[0m   Generating static pages (0/6) ...
   Generating static pages (1/6) 
   Generating static pages (2/6) 
   Generating static pages (4/6) 
 âœ“ Generating static pages (6/6)
   Finalizing page optimization ...
   Collecting build traces ...

Route (app)                              Size     First Load JS
â”Œ â—‹ /                                    1.33 kB        88.6 kB
â”œ â—‹ /_not-found                          873 B          88.1 kB
â”œ Æ’ /api/detail                          0 B                0 B
â”œ Æ’ /api/detail_backup                   0 B                0 B
â”œ Æ’ /api/detail/[id]                     0 B                0 B
â”œ â—‹ /api/health                          0 B                0 B
â”œ Æ’ /api/scrape                          0 B                0 B
â”œ Æ’ /api/search                          0 B                0 B
â”œ Æ’ /cafe/[id]                           10.8 kB          98 kB
â”” â—‹ /search                              1.74 kB          89 kB
+ First Load JS shared by all            87.3 kB
  â”œ chunks/117-6d3152f80147ba9e.js       31.7 kB
  â”œ chunks/fd9d1056-9f91b5e418130764.js  53.6 kB
  â”” other shared chunks (total)          1.89 kB


â—‹  (Static)   prerendered as static content
Æ’  (Dynamic)  server-rendered on demand

 ---> Removed intermediate container 9b10fa6e061b
 ---> d5b11b673472
Step 9/22 : RUN mkdir -p public || true
 ---> Running in 95ad42e1c5f1
 ---> Removed intermediate container 95ad42e1c5f1
 ---> 16f4dce2e397
Step 10/22 : FROM node:18-alpine AS runtime
 ---> ee77c6cd7c18
Step 11/22 : WORKDIR /app
 ---> Using cache
 ---> 2a7a8061ed51
Step 12/22 : ENV NODE_ENV=production
 ---> Using cache
 ---> ffa0a8b3be0f
Step 13/22 : ENV PORT=3000
 ---> Using cache
 ---> b494d2f87f8e
Step 14/22 : ENV HOSTNAME="0.0.0.0"
 ---> Using cache
 ---> 5fd6e466536b
Step 15/22 : COPY --from=builder /app/.next/standalone ./
 ---> b282aeb4e36e
Step 16/22 : COPY --from=builder /app/prisma ./prisma
 ---> a34b1917dbd8
Step 17/22 : COPY --from=builder /app/node_modules/@prisma ./node_modules/@prisma
 ---> 9141765d0d4b
Step 18/22 : COPY --from=builder /app/node_modules/.prisma ./node_modules/.prisma
 ---> 5ee7acf5bde1
Step 19/22 : RUN npx prisma generate
 ---> Running in 732e676d3e59
[91mnpm warn exec The following package was not found and will be installed: prisma@6.19.2
[0mPrisma schema loaded from prisma/schema.prisma
[91mError: 
Cannot find module '/app/node_modules/@prisma/client/runtime/query_engine_bg.postgresql.wasm-base64.js'
Require stack:
- /root/.npm/_npx/2778af9cee32ff87/node_modules/prisma/build/index.js


[0m[91mnpm notice
npm notice New major version of npm available! 10.8.2 -> 11.10.0
npm notice Changelog: https://github.com/npm/cli/releases/tag/v11.10.0
npm notice To update run: npm install -g npm@11.10.0
npm notice
[0mThe command '/bin/sh -c npx prisma generate' returned a non-zero code: 1
