DEPRECATED: The legacy builder is deprecated and will be removed in a future release.
            Install the buildx component to build images with BuildKit:
            https://docs.docker.com/go/buildx/

Sending build context to Docker daemon  306.2kB
Step 1/18 : FROM node:18-alpine AS builder
 ---> ee77c6cd7c18
Step 2/18 : WORKDIR /app
 ---> Using cache
 ---> b618f0508d9b
Step 3/18 : COPY package*.json ./
 ---> Using cache
 ---> f4db49477b96
Step 4/18 : RUN npm ci --legacy-peer-deps
 ---> Using cache
 ---> 6d16f87e38c5
Step 5/18 : COPY prisma ./prisma
 ---> Using cache
 ---> 98d8af9d1df0
Step 6/18 : RUN npx prisma generate
 ---> Using cache
 ---> 17d2a069d37e
Step 7/18 : COPY . .
 ---> 2d8114b39ced
Step 8/18 : RUN npm run build
 ---> Running in 1cd12e7c8154

> nabijiyo@1.0.0 build
> next build

Attention: Next.js now collects completely anonymous telemetry regarding usage.
This information is used to shape Next.js' roadmap and prioritize features.
You can learn more, including how to opt-out if you'd not like to participate in this anonymous program, by visiting the following URL:
https://nextjs.org/telemetry

  ▲ Next.js 14.2.35

   Creating an optimized production build ...
 ✓ Compiled successfully
   Skipping linting
   Checking validity of types ...
   Collecting page data ...
   Generating static pages (0/4) ...
   Generating static pages (1/4) 
   Generating static pages (2/4) 
   Generating static pages (3/4) 
 ✓ Generating static pages (4/4)
   Finalizing page optimization ...
   Collecting build traces ...

Route (app)                              Size     First Load JS
┌ ○ /                                    1.67 kB        88.9 kB
├ ○ /_not-found                          873 B          88.1 kB
└ ƒ /api/search                          0 B                0 B
+ First Load JS shared by all            87.2 kB
  ├ chunks/117-29466efefd806f9c.js       31.7 kB
  ├ chunks/fd9d1056-3eee857bde8f3b06.js  53.6 kB
  └ other shared chunks (total)          1.86 kB


○  (Static)   prerendered as static content
ƒ  (Dynamic)  server-rendered on demand

 ---> Removed intermediate container 1cd12e7c8154
 ---> 428abfc8157c
Step 9/18 : FROM node:18-alpine AS runtime
 ---> ee77c6cd7c18
Step 10/18 : WORKDIR /app
 ---> Using cache
 ---> b618f0508d9b
Step 11/18 : ENV NODE_ENV=production
 ---> Using cache
 ---> eddd87d13127
Step 12/18 : COPY --from=builder /app/node_modules ./node_modules
 ---> Using cache
 ---> 23c9625a5585
Step 13/18 : COPY --from=builder /app/.next ./.next
 ---> f99a08a92a7e
Step 14/18 : COPY --from=builder /app/package.json ./package.json
 ---> 24683ebe0693
Step 15/18 : COPY --from=builder /app/prisma ./prisma
 ---> 6c530112a00d
Step 16/18 : EXPOSE 3000
 ---> Running in 654081dd817a
 ---> Removed intermediate container 654081dd817a
 ---> 91810b19ed97
Step 17/18 : HEALTHCHECK --interval=30s --timeout=10s --start-period=10s --retries=3     CMD node -e "require('http').get('http://localhost:3000/api/health', (r) => {process.exit(r.statusCode === 200 ? 0 : 1)})" || exit 1
 ---> Running in b4262ae9498b
 ---> Removed intermediate container b4262ae9498b
 ---> 79254a8f9bdb
Step 18/18 : CMD ["npm", "start"]
 ---> Running in 445e12f6259f
 ---> Removed intermediate container 445e12f6259f
 ---> 93d71c7a3ff4
Successfully built 93d71c7a3ff4
Successfully tagged registry.prup.xyz/ai-lounge/nabijiyo:latest
